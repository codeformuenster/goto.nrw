<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

    <title>goto.NRW</title>

    <!-- CSS includes -->

	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="node_modules/leaflet/dist/leaflet.css" rel="stylesheet" type="text/css">
    <link href="node_modules/materialize-css/dist/css/materialize.min.css" rel="stylesheet">

    <style>
        body {
            padding: 0;
            margin: 0;
        }

        html,
        body,
        #map {
            height: 100%;
        }
    </style>

</head>

<body>

    <div id="map"></div>

    <!--  FLOATING ACTION BUTTON-->
    <div class="fixed-action-btn" style="bottom: 45px; right: 24px;">
        <a class="btn-floating btn-large red modal-trigger" href="#modal1">
            <i class="large material-icons">mode_edit</i>
        </a>
    </div>
    <!-- MODAL -->
    <div id="modal1" class="modal modal-fixed-footer">
        <div class="modal-content">
            <h4>Deine Auswahl</h4>
            <p>Wähle deine Präferenzen aus.</p>

            <ul class="collection sortable">
                <li class="collection-item 1" id="0">Nahverkehr</li>
                <li class="collection-item 2" id="1">Sicherheit</li>
                <li class="collection-item 3" id="2">Freizeit</li>
                <li class="collection-item 4" id="3">Kultur</li>
                <li class="collection-item 5" id="4">Bildung</li>
                <li class="collection-item 6" id="5">Arbeitsmarkt</li>
            </ul>
        </div>
        <div class="modal-footer">
            <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat ">Los geht's</a>
        </div>
    </div>

    <!-- JavaScript includes -->

    <script src="node_modules/jquery/dist/jquery.min.js"></script>
    <script src="node_modules/leaflet/dist/leaflet.js"></script>
    <script src="node_modules/materialize-css/dist/js/materialize.min.js"></script>
    <script src="node_modules/html5sortable/dist/html.sortable.min.js" charset="utf-8"></script>
    <script src="js/client.min.js"></script>

    <script>
        $(document).ready(function() {
            // the "href" attribute of .modal-trigger must specify the modal ID that wants to be triggered
            $('.modal-trigger').leanModal();

            sortable('.sortable');

            sortable('.sortable')[0].addEventListener('sortstop', function(e) {
                /*

                This event is triggered when the user stops sorting. The DOM position may have changed.

                e.detail.item contains the element that was dragged.
                e.detail.startparent contains the element that the dragged item came from.

                */

                var z;
                var input = [];
                var i = $('.sortable')[0].children;
                for (var j = 0; j < i.length; j++) {
                    z = i[j].id;
                    input.push(z);
                    console.log("The id is: " + z);
                }
                console.log(input);

            });
        });
    </script>

	<script>
    	var map = L.map('map').setView([51.517, 7.602914], 8);
        var layerURL = 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png'; // OSM Maps at the moment.
        L.tileLayer(layerURL, {
            attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>',
            maxZoom: 18,
        }).addTo(map);

    // Add NRW Kreise

    $.getJSON("/KreiseNRW.json", function(areas){

		L.geoJson(areas).addTo(map);

    })


    </script>
</body>

</html>
